"use strict";function getElement(t,e=document.documentElement){e=e.querySelector(t);if(null===e)throw new Error("Unknown HTML");return e}function getParent(t,e=1){for(;e--;){var s=t.parentElement;if(null===s)throw new Error("Unknown HTML");t=s}return t}class dust{constructor(){this.x=50,this.y=50,this.vx=2*Math.random()+2,this.vy=2*Math.random(),this.color="#fff",this.shadowBlur=3*Math.random(),this.shadowX=2*Math.random()-1,this.shadowY=2*Math.random()-1,this.radiusX=3*Math.random(),this.radiusY=3*Math.random(),this.rotation=Math.PI*Math.floor(2*Math.random())}}class canvasDust{constructor(t){this.width=300,this.height=300,this.dustQuantity=50,this.dustArr=[],this.build=()=>{if(this.resize(),this.ctx){var t;for(t of canvasDust.getPoint(this.dustQuantity)){var e=new dust;this.buildDust(t[0],t[1],e),this.dustArr.push(e)}setInterval(this.play,40)}},this.play=()=>{var t,e,s,i,o=this.dustArr;null!=(t=this.ctx)&&t.clearRect(0,0,this.width,this.height);for(e of o)e.x<0||e.y<0?(s=this.width,i=Math.floor(Math.random()*window.innerHeight),e.x=s,e.y=i,this.buildDust(s,i,e)):(s=e.x-e.vx,i=e.y-e.vy,this.buildDust(s,i,e))},this.buildDust=(t,e,s)=>{const i=this.ctx;t&&(s.x=t),e&&(s.y=e),i&&(i.beginPath(),i.shadowBlur=s.shadowBlur,i.shadowColor=s.color,i.shadowOffsetX=s.shadowX,i.shadowOffsetY=s.shadowY,i.ellipse(s.x,s.y,s.radiusX,s.radiusY,s.rotation,0,2*Math.PI),i.closePath(),i.fillStyle=s.color,i.fill())},this.resize=()=>{const t=this.canvas;var e=window.innerWidth,s=window.innerHeight;this.width=e,this.height=s,this.dustQuantity=Math.floor((e+s)/38),void 0!==t&&(t.width=e,t.height=s)};const e=getElement(t);if(!e)throw new Error("canvasID 无效");this.canvas=e,this.ctx=e.getContext("2d"),this.build(),window.addEventListener("resize",()=>this.resize())}}canvasDust.getPoint=(e=1)=>{let s=[];for(let t=0;t<e;t++){var i=Math.floor(Math.random()*window.innerWidth),o=Math.floor(Math.random()*window.innerHeight);s.push([i,o])}return s};try{new canvasDust("#canvas-dust")}catch(t){}class Code{constructor(){this.reverse=(t,e,s)=>{const i=getParent(t);i.classList.contains(e)?(i.classList.remove(e),i.classList.add(s)):(i.classList.remove(s),i.classList.add(e))},this.doAsCode=s=>{var t=this.resetName(s.classList[1]),e=getElement(".gutter",s).children[0].childElementCount>>1;s.classList.add(e<16?"open":"fold"),s.innerHTML=`<span class="code-header">        <span class="code-title">          <div class="code-icon"></div>${this.resetName(t)} 共 ${e} 行</span>          <span class="code-header-tail">            <button class="code-copy"></button>            <span class="code-space">展开</span></span></span></span>      <div class="code-box">${s.innerHTML}</div>`,getElement(".code-copy",s).addEventListener("click",t=>{const e=t.target;navigator.clipboard.writeText(getElement("code",s).innerText),e.classList.add("copied"),setTimeout(()=>e.classList.remove("copied"),1200)}),getElement(".code-header",s).addEventListener("click",t=>{t.target.classList.contains("code-copy")||this.reverse(t.currentTarget,"open","fold")})},this.findCode=()=>{let t=document.querySelectorAll(".highlight");null!==t&&t.forEach(t=>{if(null===t.getAttribute("code-find")){try{t.classList.contains("mermaid")||null!==t.querySelector(".code-header")||(null!==t.querySelector(".mermaid")?this.doAsMermaid(t):this.doAsCode(t))}catch(t){return}t.setAttribute("code-find","")}})},this.findCode()}doAsMermaid(t){var e=t.querySelector(".mermaid");t.outerHTML='<div class="highlight mermaid">'+e.innerText+"</div>"}resetName(t){return"plaintext"==t?"TEXT":"cs"==t?"C#":"cpp"==t?"C++":t.toUpperCase()}}let code=new Code;class Cursor{constructor(){this.now=new MouseEvent(""),this.first=!0,this.last=0,this.moveIng=!1,this.fadeIng=!1,this.outer=getElement("#cursor-outer").style,this.effecter=getElement("#cursor-effect").style,this.attention="a,input,button,textarea,.code-header,.gt-user-inner,.navBtnIcon",this.move=h=>{if(void 0!==this.now){let t=this.outer.left,e=this.outer.top,s=Number(t.substring(0,t.length-2)),i=Number(e.substring(0,e.length-2)),o=.3*(this.now.x-s),n=.3*(this.now.y-i);15<h-this.last&&(s+=o,i+=n,this.outer.left=s.toFixed(2)+"px",this.outer.top=i.toFixed(2)+"px",this.last=h),.2<Math.abs(o)||.2<Math.abs(n)?window.requestAnimationFrame(this.move):this.moveIng=!1}},this.reset=t=>{this.moveIng||(this.moveIng=!0,window.requestAnimationFrame(this.move)),this.now=t,this.first&&(this.first=!1,this.outer.left=String(this.now.x)+"px",this.outer.top=String(this.now.y)+"px")},this.Aeffect=t=>{0==this.fadeIng&&(this.fadeIng=!0,this.effecter.left=String(t.x)+"px",this.effecter.top=String(t.y)+"px",this.effecter.transition="transform .5s cubic-bezier(0.22, 0.61, 0.21, 1)        ,opacity .5s cubic-bezier(0.22, 0.61, 0.21, 1)",this.effecter.transform="translate(-50%, -50%) scale(1)",this.effecter.opacity="0",setTimeout(()=>{this.fadeIng=!1,this.effecter.transition="",this.effecter.transform="translate(-50%, -50%) scale(0)",this.effecter.opacity="1"},500))},this.hold=()=>{this.outer.height="24px",this.outer.width="24px",this.outer.background="rgba(255, 255, 255, 0.5)"},this.relax=()=>{this.outer.height="36px",this.outer.width="36px",this.outer.background="unset"},this.pushHolder=t=>{t.forEach(t=>{t.classList.contains("is--active")||(t.addEventListener("mouseover",this.hold,{passive:!0}),t.addEventListener("mouseout",this.relax,{passive:!0}))})},this.pushHolders=()=>{this.pushHolder(document.querySelectorAll(this.attention))},this.effecter.transform="translate(-50%, -50%) scale(0)",this.effecter.opacity="1",window.addEventListener("mousemove",this.reset,{passive:!0}),window.addEventListener("click",this.Aeffect,{passive:!0}),this.pushHolders();const t=new MutationObserver(this.pushHolders);t.observe(document,{childList:!0,subtree:!0})}}new Cursor;class Index{constructor(){this.setItem=e=>{e.classList.add("active");let t=getParent(e),s=t.children;for(let t=0;t<s.length;t++){const e=s.item(t);if(e.classList.contains("toc-child")){e.classList.add("has-active");break}}for(;"toc"!=t.classList[0];t=getParent(t))"toc-child"==t.classList[0]&&t.classList.add("has-active")},this.reset=()=>{let t=document.querySelectorAll("#toc-div .active"),e=document.querySelectorAll("#toc-div .has-active");t.forEach(t=>{t.classList.remove("active")}),e.forEach(t=>{t.classList.remove("has-active")})},this.modifyIndex=(t,e)=>{let s=[];t.forEach(t=>{s.push(t.getBoundingClientRect().top)}),this.reset();for(let t=0;t<e.length;++t){var i=e.item(t);if(t+1==s.length||150<s[t+1]&&(s[t]<=150||0==t)){this.setItem(i);break}}},this.setHtml=()=>{let t=document.querySelectorAll("h2,h3,h4,h5,h6"),e=document.querySelectorAll(".toc-link");0!==e.length&&this.setItem(e.item(0)),getElement("main").addEventListener("scroll",()=>{0!==e.length&&this.modifyIndex(t,e)},{passive:!0})},document.addEventListener("pjax:success",this.setHtml),this.setHtml()}}new Index;class Header{constructor(){this.header=getElement("header"),this.button=getElement(".navBtnIcon"),this.closeSearch=!1,this.relabel=()=>{let t=this.header.querySelectorAll(".navItem"),n=0,h=t.item(0);if(getElement(".navBtn").classList.remove("hide"),t.forEach(t=>{if("search-header"!==t.id){let s=t,i=getElement("a",s);if(null!==i){let t=i.href,e=s.getAttribute("matchdata");if(s.classList.remove("active"),getParent(i)==s&&(t.length>n&&null!==document.URL.match(t)&&(n=t.length,h=s),e)){const o=e.split(",");o.forEach(t=>{null!==document.URL.match(t)&&(h=s,n=1/0)})}}}}),null!==h)for(;h.classList.contains("navItem")&&h.classList.add("active"),!(h=getParent(h)).classList.contains("navContent"););},this.inHeader=t=>{let e=t.target;for(;e!==this.header&&e!==document.body;)e=getParent(e);e!==this.header&&this.close()},this.open=(t=this.header)=>{scrolls.slideDown(),t.classList.add("expanded"),t.classList.remove("closed"),t===this.header&&(t.classList.add("moving"),setTimeout(()=>t.classList.remove("moving"),300)),document.addEventListener("click",this.inHeader)},this.close=(t=this.header)=>{document.removeEventListener("click",this.inHeader),t.classList.add("closed"),t.classList.remove("expanded"),t===this.header&&(t.classList.add("moving"),setTimeout(()=>t.classList.remove("moving"),300),this.closeAll())},this.reverse=(t=this.header)=>{this.closeSearch?this.closeSearch=!1:t.classList.contains("expanded")?this.close(t):this.open(t)},this.closeAll=()=>{this.header.querySelectorAll(".expanded").forEach(t=>t.classList.remove("expanded"))},this.relabel(),document.addEventListener("pjax:success",this.relabel),document.addEventListener("pjax:send",()=>this.close()),this.button.addEventListener("mousedown",()=>{document.querySelector(".search")&&(this.closeSearch=!0)}),this.button.onclick=()=>this.reverse(this.header),document.querySelectorAll(".navItemList").forEach(e=>{(e=(e=getParent(e)).classList.contains("navBlock")?getParent(e):e).addEventListener("click",t=>{getParent(t.target)!==e&&getParent(t.target,2)!==e||this.reverse(e)})})}}var header=new Header;class Scroll{constructor(){this.scrolling=0,this.getingtop=!1,this.height=0,this.visible=!1,this.touchX=0,this.touchY=0,this.mayNotUp=!1,this.reallyUp=!1,this.intop=!1,this.startTop=!1,this.scrolltop=()=>{getElement("main").scroll({top:0,left:0,behavior:"smooth"}),this.totop.style.opacity="0",this.getingtop=!0,setTimeout(()=>this.totop.style.display="none",300)},this.totopChange=t=>{t.getBoundingClientRect().top<-200?(this.totop.style.display="",this.visible=!0,setTimeout(()=>{this.visible&&(this.totop.style.opacity="1")},300)):(this.totop.style.opacity="0",this.visible=!1,setTimeout(()=>{this.visible||(this.totop.style.display="none")},300))},this.slideDown=()=>{if(this.intop){const t=getElement("main").classList;t.remove("up"),t.add("down"),t.add("moving"),setTimeout(()=>{t.remove("down"),t.remove("moving")},300),this.intop=!1}},this.slideUp=()=>{this.intop||(getElement(".navBtn").classList.remove("hide"),getElement("main").classList.add("up"),getElement("main").classList.add("moving"),this.intop=!0,setTimeout(()=>getElement("main").classList.remove("moving"),300))},this.setHtml=()=>{try{let s=getElement(".navBtn");this.totop=getElement("#to-top"),this.height=0,this.visible=!1,getElement("main").addEventListener("scroll",()=>{try{var t=getElement("article").getBoundingClientRect().top,e=getElement("#post-title");this.height>=t&&this.intop&&this.slideDown(),document.querySelector(".expanded")||(100<this.height-t?(s.classList.add("hide"),this.height=t):t>this.height&&(20<t-this.height&&s.classList.remove("hide"),this.height=t)),++this.scrolling,setTimeout(()=>{--this.scrolling||(this.getingtop=!1)},100),this.getingtop||this.totopChange(e)}catch(t){}})}catch(t){}},this.checkTouchMove=t=>{50<Math.abs(t.changedTouches[0].screenX-this.touchX)&&!this.reallyUp&&(this.mayNotUp=!0),document.querySelector(".expanded")||1024<window.innerWidth||this.mayNotUp||t.changedTouches[0].screenY==this.touchY||(this.startTop||0<=getElement("article").getBoundingClientRect().top)&&(this.reallyUp=!0,t.changedTouches[0].screenY>this.touchY?this.slideUp():this.slideDown(),this.touchY=t.changedTouches[0].screenY)},this.startTouch=t=>{this.touchX=t.changedTouches[0].screenX,this.touchY=t.changedTouches[0].screenY,this.mayNotUp=!1,this.startTop=0<=getElement("article").getBoundingClientRect().top},document.addEventListener("pjax:success",this.setHtml),document.querySelector(".search-header")&&(document.addEventListener("touchstart",this.startTouch),document.addEventListener("touchmove",this.checkTouchMove),document.addEventListener("wheel",t=>{document.querySelector(".expanded")||1024<window.innerWidth||0<=getElement("article").getBoundingClientRect().top&&(t.deltaY<0?this.slideUp():this.slideDown())})),this.setHtml(),this.totop=document.querySelector("#to-top")}}var scrolls=new Scroll;class pjaxSupport{constructor(){this.loading=getElement(".loading"),this.left=getElement(".loadingBar.left"),this.right=getElement(".loadingBar.right"),this.timestamp=0,this.start=t=>{this.left.style.width=t+"%",this.right.style.width=t+"%",++this.timestamp},this.loaded=()=>{++this.timestamp,"1"===this.loading.style.opacity&&(getElement("main").scrollTop=0,"50%"!==this.left.style.width&&(this.start(50),setTimeout(t=>{this.timestamp==t&&(this.loading.style.opacity="0")},600,this.timestamp)))},document.addEventListener("pjax:send",()=>{getElement("main").classList.contains("up")&&scrolls.slideDown(),this.loading.classList.add("reset"),this.start(0),setTimeout(t=>{this.timestamp==t&&(this.loading.style.opacity="1",this.loading.classList.remove("reset"),this.start(15),setTimeout(t=>{this.timestamp==t&&this.start(30)},800,this.timestamp))},10,this.timestamp)}),document.addEventListener("pjax:start",this.loaded),document.addEventListener("pjax:complete",this.loaded)}}try{new pjaxSupport}catch(t){}